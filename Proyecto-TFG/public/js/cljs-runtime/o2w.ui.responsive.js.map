{"version":3,"sources":["o2w/ui/responsive.cljs"],"mappings":";AAQA,AAAKA,6BAAS,gDAAA,hDAACC;AACf,AAAKC,2BAAO,+CAAA,mFAAA,lIAACC,oBAASH;AACtB,AAAKI,0BAAM,+CAAA,mFAAA,lIAACD,oBAASH;AACrB,AAAKK,2BAAO,gDAAA,hDAACJ;AACb,AAAKK,+BAAW,gDAAA,hDAACL;AAEjB,AAAKM,kCAAQ,AAAAC,4BAAA;AAAA,AAAU,oDAAA,AAAAC,0CAAA,vFAACC,6DAAGL;;AAC3B,AAAKM,kCAAQ,AAAAH,4BAAA;AAAA,AAAU,oDAAA,AAAAC,0CAAA,vFAACC,6DAAGL;;AAC3B,AAAKO,mCAAS,AAAAJ,4BAAA;AAAA,AAAU,oDAAA,AAAAC,0CAAA,vFAACC,6DAAGL;;AAE5B,kCAAA,lCAAMQ;AAAN,AACE,IAAMC,YAAU,AAACC;IACXC,QAAU,WAAA,VAAMF;IAChBG,SAAU,WAAA,VAAMH;IAChBI,UAAU,mBAAA,yDAAA,oBAAA,yDAAA,AAAA,vJACE,SAAA,RAAGF,2EACH,SAAA,RAAGA;;AALrB,AAQE,iDAAA,2CAAA,6DAAA,zJAACG,sBAAOnB,6HAAiBgB,+DAAcC;;AACvC,OAACE,sBAAOd,yBAAOa;;AAEnB,sCAAA,tCAAME;AAAN,AACE,OAACD,sBAAOb,6BAAY,AAACe,4BAAuBC;;AAE9C,gCAAA,hCAAMC;AAAN,AACE,AAACV;;AAED,uDAAA,vDAACW,mBAAmBC,OACAC;AADpB,AAEqB,OAACb;;;AAEtB,AAACO;;AACD,8DAAA,vDAACI,mBAAmBC,OACAE;AADpB,AAEqB,OAACP;;;AAExB,6BAAA,qCAAAQ,lEAAMI;AAAN,AAAA,IAAAH,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;UAAA,AAAAE,4CAAAF,eAAA,oDAAA,rHAAwBI;aAAxB,AAAAF,4CAAAF,eAAA,wDAAA,5HAA4BK;YAA5B,AAAAH,4CAAAF,eAAA,nEAAkCM;AAAlC,AAGE,GAAI,CAAA,AAAA1B,gBAAIH,gCAAW2B;AAAnB,0FAAA,mEAAA,2CAAA,+DAAA,PAC2BC,oEACAE,0BACxB,+BAAA,bAAID,OAAMA;;AAHb,0FAAA","names":["o2w.ui.responsive/viewport","reagent.core.atom","o2w.ui.responsive/height","reagent.core/cursor","o2w.ui.responsive/width","o2w.ui.responsive/device","o2w.ui.responsive/scroll-top","o2w.ui.responsive/mobile?","reagent.ratom/make-reaction","cljs.core/deref","cljs.core._EQ_","o2w.ui.responsive/tablet?","o2w.ui.responsive/desktop?","o2w.ui.responsive/detect-device","_viewport","goog.dom/getViewportSize","width","height","_device","cljs.core/reset!","o2w.ui.responsive/detect-offset-top","goog.style/getPageOffsetTop","js/document","o2w.ui.responsive/start!","js/goog.events.listen","js/window","js/goog.events.EventType.RESIZE","js/goog.events.EventType.SCROLL","p__12582","map__12583","cljs.core/--destructure-map","cljs.core.get","o2w.ui.responsive/angle-up","top","class","inner","o2w.ui.scroll/top"],"sourcesContent":["(ns o2w.ui.responsive\n  (:require [goog.dom :as dom]\n            [goog.style :as style]\n            [reagent.ratom :refer [reaction]]\n            [o2w.ui.scroll :as scroll]\n            [reagent.core :as r])\n  (:import goog.events))\n\n(def viewport (r/atom nil))\n(def height (r/cursor viewport [:height]))\n(def width (r/cursor viewport [:width]))\n(def device (r/atom :desktop))\n(def scroll-top (r/atom 0))\n\n(def mobile? (reaction (= @device :mobile)))\n(def tablet? (reaction (= @device :tablet)))\n(def desktop? (reaction (= @device :desktop)))\n\n(defn detect-device []\n  (let [_viewport (dom/getViewportSize)\n        width     (aget _viewport  \"width\")\n        height    (aget _viewport \"height\")\n        _device   (cond\n                    (< width 753)  :mobile\n                    (< width 1010) :tablet\n                    :else          :desktop)]\n\n    (reset! viewport {:width width :height height})\n    (reset! device _device)))\n\n(defn detect-offset-top []\n  (reset! scroll-top  (style/getPageOffsetTop js/document)))\n\n(defn start! []\n  (detect-device)\n\n  (goog.events.listen js/window\n                      goog.events.EventType.RESIZE\n                      #(detect-device))\n\n  (detect-offset-top)\n  (goog.events.listen js/window\n                      goog.events.EventType.SCROLL\n                      #(detect-offset-top)))\n\n(defn angle-up [{:keys [top class inner]\n                 :or   {top   200\n                        class \"icon-angle-up\"}}]\n  (if (> @scroll-top top)\n    [:div#gotoTop {:class    class\n                   :on-click scroll/top}\n     (if inner inner)]\n    [:div]))\n"],"x_google_ignoreList":[0]}