{"version":3,"sources":["administracion/editar.cljs"],"mappings":"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","names":["administracion.editar/producto","reagent.core.atom","administracion.editar/estado-actualizacion","administracion.editar/get-producto-por-id","id","p1__17592#","cljs.core/deref","cljs.core/some","cljs.core._EQ_","app.db/list-productos","administracion.editar/obtener-id-categoria","nombre","categorias","cljs.core/first","p1__17593#","cljs.core.filter","administracion.editar/get-categoria-por-id","p1__17594#","app.db/categorias","administracion.editar/normalizar-producto","producto","p1__17595#","cljs.core.update","clojure.string/blank?","p1__17596#","p1__17597#","administracion.editar/actualizar-producto","producto-valor","id-categoria","producto-para-api","cljs.core.dissoc","cljs.core.assoc","body-extendido","url","opciones","js/JSON.stringify","cljs.core/clj->js","js/fetch","respuesta","cljs.core/reset!","error","administracion.editar/render-editar","administracion.editar/page","params","cljs.core.get_in","app.state/current-route","tipo","js/parseInt","G__17604","js/Error","p1__17598#","p1__17599#","p1__17600#","p1__17601#","p1__17602#","p1__17603#","cljs.core.swap_BANG_","cljs.core/assoc","iter__5480__auto__","s__17606","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__17608","cljs.core/chunk-buffer","i__17607","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__17605","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","categoria","nuevo-valor","js/console.log","cljs.core/chunk-first"],"sourcesContent":["(ns administracion.editar\r\n  (:require [reagent.core :as r]\r\n            [reagent.dom :as dom]\r\n            [app.state :refer [current-route]]\r\n            [app.db :refer [list-productos categorias]]))\r\n\r\n(def producto (r/atom {:nombre \"\"}))\r\n\r\n(def estado-actualizacion (r/atom nil))\r\n\r\n(defn get-producto-por-id [id]\r\n  (some #(when (= (:id %) id) %) @list-productos))\r\n\r\n(defn obtener-id-categoria [nombre categorias]\r\n  (:id (first (filter #(= (:nombre %) nombre) categorias))))\r\n\r\n(defn get-categoria-por-id [id]\r\n  (some #(when (= (:id %) id) %) @categorias))\r\n\r\n(defn normalizar-producto [producto]\r\n  (-> producto\r\n      (update :nombre #(if (clojure.string/blank? %) \" -- \" %))\r\n      (update :description #(if (clojure.string/blank? %) \" -- \" %))\r\n      (update :precio #(if (clojure.string/blank? %) \" --\u20ac \" %))))\r\n\r\n(defn actualizar-producto [producto]\r\n  (let [producto-valor (normalizar-producto @producto)\r\n        id (:id producto-valor)\r\n        id-categoria (obtener-id-categoria (:nombre_categoria producto-valor) @categorias)\r\n        producto-para-api (-> producto-valor\r\n                              (dissoc :nombre_categoria)\r\n                              (assoc :categoria_id id-categoria))\r\n        body-extendido (assoc producto-para-api \"_method\" \"PUT\")\r\n        url (str \"/api/productos/\" id)\r\n        opciones #js {:method \"POST\"\r\n                      :headers #js {\"Content-Type\" \"application/json\"}\r\n                      :body (js/JSON.stringify (clj->js body-extendido))} ;; y body-extendido incluye \"_method\": \"PUT\"\r\n        ]\r\n    (-> (js/fetch url opciones)\r\n        (.then (fn [respuesta]\r\n                 (if (.-ok respuesta)\r\n                   (reset! estado-actualizacion \"Producto actualizado correctamente\")\r\n                   (reset! estado-actualizacion \"Error del servidor al guardar\"))))\r\n        (.catch (fn [error]\r\n                  (reset! estado-actualizacion \"Error del servidor al guardar\"))))))\r\n\r\n(defn render-editar [producto]\r\n  [:div\r\n   [:button {:on-click #(actualizar-producto producto)} \"Guardar cambios\"]\r\n   [:button\r\n    \"Cancelar\"]])\r\n\r\n(defn page []\r\n  (let [params (get-in @current-route [:parameters :path])\r\n        tipo (:tipo params)\r\n        id (js/parseInt (:id params))\r\n        producto (r/atom (get-producto-por-id id))]\r\n    (case tipo\r\n      \"producto\"\r\n      (if @producto\r\n        [:div.row {:class \"divEditar\"}\r\n         [:div.col-6\r\n          [:h1 \"Datos del producto seleccionado:\"]\r\n          [:p [:strong \"ID: \"] (:id @producto)]\r\n          [:p [:strong \"Nombre: \"] (:nombre @producto)]\r\n          [:p [:strong \"Descripci\u00f3n: \"] (:description @producto)]\r\n          [:p [:strong \"Precio: \"] (str (:precio @producto) \" \u20ac\")]\r\n          [:p [:strong \"Categor\u00eda: \"] (:nombre_categoria @producto)]\r\n          [:p [:strong \"Tipo de plato: \"] (:tipo_plato @producto)]\r\n          [:p [:strong \"Tipo de porci\u00f3n: \"] (:tipo_porcion @producto)]\r\n          [:h3 [:strong \"Restricciones alimentarias: \"]]\r\n          [:p [:strong \"Vegetariano: \"]\r\n           (if (:es_vegetariano @producto)\r\n             [:span {:style {:color \"green\"}} \"\u2714\ufe0f\"]\r\n             [:span {:style {:color \"red\"}} \"\u274c\"])]\r\n          [:p [:strong \"Vegano: \"]\r\n           (if (:es_vegano @producto)\r\n             [:span {:style {:color \"green\"}} \"\u2714\ufe0f\"]\r\n             [:span {:style {:color \"red\"}} \"\u274c\"])]\r\n          [:p [:strong \"Gluten: \"]\r\n           (if (:es_sin_gluten @producto)\r\n             [:span {:style {:color \"green\"}} \"\u2714\ufe0f\"]\r\n             [:span {:style {:color \"red\"}} \"\u274c\"])]\r\n          [:p [:strong \"Lactosa: \"]\r\n           (if (:es_sin_lactosa @producto)\r\n             [:span {:style {:color \"green\"}} \"\u2714\ufe0f\"]\r\n             [:span {:style {:color \"red\"}} \"\u274c\"])]]\r\n         [:div.col-6\r\n          (when @estado-actualizacion\r\n            [:p {:style {:color \"blue\"}} @estado-actualizacion])\r\n          [:h1 \"Editar datos de producto:\"]\r\n          [:p [:strong \"ID: \"] (:id @producto)]\r\n          [:p [:strong \"Nombre de producto: \"]\r\n           [:input {:type \"text\"\r\n                    :value (:nombre @producto)  ;; Aqu\u00ed accedes al valor del producto desde el atom\r\n                    :placeholder \"Ingrese el nuevo nombre de producto.\"\r\n                    :on-change #(swap! producto assoc :nombre (-> % .-target .-value))}]]\r\n\r\n          [:p [:strong \"Descripci\u00f3n: \"]\r\n           [:input {:type \"text\"\r\n                    :value (:description @producto)\r\n                    :placeholder \"Nueva descripcion de producto.\"\r\n                    :on-change #(swap! producto assoc :description (-> % .-target .-value))}]]\r\n          [:p [:strong \"Precio: \"]\r\n           [:input {:type \"text\"\r\n                    :value (:precio @producto)\r\n                    :on-change #(swap! producto assoc :precio (-> % .-target .-value))}] [:span \"\u20ac\"]]\r\n          [:p [:strong \"Selecciona nueva categor\u00eda:\"]\r\n           [:select\r\n            {:value (:nombre_categoria @producto)\r\n             :on-change #(swap! producto assoc :nombre_categoria (-> % .-target .-value))}\r\n            (for [categoria @categorias]\r\n              ^{:key (:id categoria)}\r\n              [:option {:value (:nombre categoria)}\r\n               (:nombre categoria)])]]\r\n\r\n          [:p [:strong \"Tipo de plato: \"]\r\n           [:select {:value (:tipo_plato @producto)\r\n                     :on-change #(swap! producto assoc :tipo_plato (-> % .-target .-value))}\r\n            [:option {:value \"Tapa\"} \"Tapa\"]\r\n            [:option {:value \"Al centro\"} \"Al centro\"]\r\n            [:option {:value \"Principal\"} \"Principal\"]]]\r\n          [:p [:strong \"Tipo de porci\u00f3n: \"]\r\n           [:select {:value (:tipo_porcion @producto)\r\n                     :on-change #(let [nuevo-valor (-> % .-target .-value)]\r\n                                   (js/console.log \"Cambiando tipo_porcion a:\" nuevo-valor)\r\n                                   (swap! producto assoc :tipo_porcion nuevo-valor))}\r\n            [:option {:value \"Por unidad\"} \"Por unidad\"]\r\n            [:option {:value \"Media raci\u00f3n\"} \"Media raci\u00f3n\"]\r\n            [:option {:value \"Raci\u00f3n completa\"} \"Raci\u00f3n completa\"]]]\r\n\r\n          [:h3 [:strong \"Restricciones alimentarias: \"]]\r\n          [:p [:strong \"Vegetariano: \"]\r\n           [:button {:on-click #(swap! producto assoc :es_vegetariano true)\r\n                     :style {:margin-right \"5px\"\r\n                             :background-color (when (:es_vegetariano @producto) \"#a8e6cf\")}}\r\n            \"Si: \u2714\ufe0f\"]\r\n           [:button {:on-click #(swap! producto assoc :es_vegetariano false)\r\n                     :style {:background-color (when-not (:es_vegetariano @producto) \"#ff8b94\")}}\r\n            \"No: \u274c\"]]\r\n          [:p [:strong \"Vegano: \"]\r\n           [:button {:on-click #(swap! producto assoc :es_vegano true)\r\n                     :style {:margin-right \"5px\"\r\n                             :background-color (when (:es_vegano @producto) \"#a8e6cf\")}}\r\n            \"Si: \u2714\ufe0f\"]\r\n           [:button {:on-click #(swap! producto assoc :es_vegano false)\r\n                     :style {:background-color (when-not (:es_vegano @producto) \"#ff8b94\")}}\r\n            \"No: \u274c\"]]\r\n          [:p [:strong \"Gluten: \"]\r\n           [:button {:on-click #(swap! producto assoc :es_sin_gluten true)\r\n                     :style {:margin-right \"5px\"\r\n                             :background-color (when (:es_sin_gluten @producto) \"#a8e6cf\")}}\r\n            \"Si: \u2714\ufe0f\"]\r\n           [:button {:on-click #(swap! producto assoc :es_sin_gluten false)\r\n                     :style {:background-color (when-not (:es_sin_gluten @producto) \"#ff8b94\")}}\r\n            \"No: \u274c\"]]\r\n          [:p [:strong \"Lactosa: \"]\r\n           [:button {:on-click #(swap! producto assoc :es_sin_lactosa true)\r\n                     :style {:margin-right \"5px\"\r\n                             :background-color (when (:es_sin_lactosa @producto) \"#a8e6cf\")}}\r\n            \"Si: \u2714\ufe0f\"]\r\n           [:button {:on-click #(swap! producto assoc :es_sin_lactosa false)\r\n                     :style {:background-color (when-not (:es_sin_lactosa @producto) \"#ff8b94\")}}\r\n            \"No: \u274c\"]]\r\n          [render-editar producto]]]\r\n        [:div {:class \"divEditar\"} \"Producto no encontrado\"])\r\n\r\n      \"categoria\"\r\n      (let [categoria (get-categoria-por-id id)]\r\n        (if categoria\r\n          [:div.row {:class \"divEditar\"}\r\n           [:div.col-12\r\n            [:h1 \"Editar categor\u00eda:\"]\r\n            [:p [:strong \"ID: \"] (:id categoria)]\r\n            [:p [:strong \"Nombre: \"] (:nombre categoria)]\r\n            [:p [:strong \"Descripci\u00f3n: \"] (:descripcion categoria)]\r\n            ;; Inputs aqu\u00ed\r\n            ]])))))\r\n\r\n\r\n\r\n"]}