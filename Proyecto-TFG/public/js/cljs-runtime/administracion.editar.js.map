{"version":3,"sources":["administracion/editar.cljs"],"mappings":"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","names":["administracion.editar/usuario-id","js/localStorage","administracion.editar/producto","reagent.core.atom","administracion.editar/categoria","administracion.editar/campo-seleccionado","administracion.editar/nuevo-valor","administracion.editar/estado-actualizacion","administracion.editar/get-producto-por-id","id","p1__13238#","cljs.core/deref","cljs.core/some","cljs.core._EQ_","app.db/list-productos","administracion.editar/get-categoria-por-id","p1__13239#","app.db/categorias","administracion.editar/tiene-mas-de-dos-decimales?","valor","vec__13240","cljs.core.nth","_","decimales","clojure.string.split","and__5000__auto__","cljs.core/count","administracion.editar/actualizar-producto","producto","campo","valor-num","usuario-id","js/localStorage.getItem","valor-parseado","G__13250","js/parseFloat","body-extendido","cljs.core/clj->js","cljs.core.assoc","url","opciones","js/JSON.stringify","js/fetch","respuesta","cljs.core/reset!","categoria","cljs.core.swap_BANG_","cljs.core/assoc","cljs.core.keyword","e","administracion.editar/actualizar-categoria","body","p1__13275#","administracion.editar/render-edicion-producto","or__5002__auto__","cljs.core.not_EQ_","p1__13276#","p1__13277#","p1__13278#","p1__13279#","p1__13280#","p1__13281#","G__13290","fexpr__13289","iter__5480__auto__","s__13299","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","b__13301","cljs.core/chunk-buffer","i__13300","map__13303","cljs.core/-nth","cljs.core/--destructure-map","cljs.core.get","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__13298","cljs.core/chunk-rest","map__13304","cljs.core/first","cljs.core/cons","cljs.core/rest","nombre","js/isNaN","js/alert","app.state/acceso-editar?","p1__13309#","administracion.editar/render-edicion-categoria","p1__13310#","administracion.editar/page","params","cljs.core.get_in","app.state/current-route","tipo","js/parseInt","with-let13312","reagent.ratom/with-let-values","temp__5808__auto__","reagent.ratom/*ratom-context*","c__12240__auto__","reagent.debug/has-console","reagent.debug/tracking","reagent.debug/track-console","js/console","init13313","cljs.core/not","res13314","with-let13315","init13316","res13317","G__13319","js/Error","js/location","cljs.core/chunk-first"],"sourcesContent":["(ns administracion.editar\r\n  (:require [reagent.core :as r]\r\n            [reagent.dom :as dom]\r\n            [app.state :as state]\r\n            [app.state :refer [current-route]]\r\n            [app.db :refer [list-productos categorias]]))\r\n\r\n(def usuario-id (.getItem js/localStorage \"id\"))\r\n(def producto (r/atom {}))\r\n(def categoria (r/atom {}))\r\n(def campo-seleccionado (r/atom nil))\r\n(def nuevo-valor (r/atom \"\"))\r\n\r\n(def estado-actualizacion (r/atom nil))\r\n\r\n(defn get-producto-por-id [id]\r\n  (some #(when (= (:id %) id) %) @list-productos))\r\n\r\n(defn get-categoria-por-id [id]\r\n  (some #(when (= (:id %) id) %) @categorias))\r\n\r\n(defn tiene-mas-de-dos-decimales? [valor]\r\n  (let [[_ decimales] (clojure.string/split valor #\"\\.\")]\r\n    (and decimales (> (count decimales) 2))))\r\n\r\n(defn actualizar-producto [producto campo valor valor-num]\r\n  (let [id (:id @producto)\r\n        usuario-id (js/localStorage.getItem \"id\")\r\n        valor-parseado (case campo\r\n                         (\"es_vegetariano\" \"es_vegano\" \"es_sin_gluten\" \"es_sin_lactosa\") (= valor \"true\")\r\n                         (\"precio\" \"categoria_id\") (js/parseFloat valor)\r\n                         valor)\r\n        body-extendido (clj->js (assoc {} campo valor-parseado \"_method\" \"PUT\" \"usuario_id\" usuario-id))\r\n        url (str \"/api/productos/\" id)\r\n        opciones #js {:method \"POST\"\r\n                      :headers #js {\"Content-Type\" \"application/json\"}\r\n                      :body (js/JSON.stringify body-extendido)}]\r\n    (-> (js/fetch url opciones)\r\n        (.then (fn [respuesta]\r\n                 (if (.-ok respuesta)\r\n                   (do\r\n                     (reset! estado-actualizacion (str \"Campo \" campo \" actualizado correctamente.\"))\r\n                     (if (= campo \"categoria_id\")\r\n                       (let [categoria (get-categoria-por-id valor-parseado)]\r\n                         (swap! producto assoc\r\n                                :categoria_id valor-parseado\r\n                                :nombre_categoria (:nombre categoria)))\r\n                       (swap! producto assoc (keyword campo) valor-parseado)))\r\n                   (reset! estado-actualizacion \"Error del servidor al actualizar campo.\"))))\r\n        (.catch (fn [e]\r\n                  (reset! estado-actualizacion \"Error del servidor al actualizar campo.\"))))))\r\n\r\n(defn actualizar-categoria [categoria campo valor]\r\n  (let [id (:id @categoria)\r\n        usuario-id (js/localStorage.getItem \"id\")\r\n        body (clj->js {\"usuario_id\" usuario-id\r\n                       campo valor})\r\n        url (str \"/api/categoria/\" id)\r\n        opciones #js {:method \"PUT\"\r\n                      :headers #js {\"Content-Type\" \"application/json\"}\r\n                      :body (js/JSON.stringify body)}]\r\n    (-> (js/fetch url opciones)\r\n        (.then (fn [respuesta]\r\n                 (if (.-ok respuesta)\r\n                   (do\r\n                     ;; Actualiza los datos localmente en la UI\r\n                     (swap! categoria assoc (keyword campo) valor)\r\n                     (reset! estado-actualizacion (str \"Campo \" campo \" actualizado correctamente.\")))\r\n                   (reset! estado-actualizacion \"Error del servidor al actualizar campo.\"))))\r\n        (.catch (fn [e]\r\n                  (reset! estado-actualizacion \"Error de red al actualizar.\"))))))\r\n\r\n\r\n\r\n(defn render-edicion-producto [producto]\r\n  [:div\r\n   [:h3 \"Selecciona el campo que quieres modificar:\"]\r\n   [:select {:value (or @campo-seleccionado \"\")\r\n             :on-change #(reset! campo-seleccionado (-> % .-target .-value))}\r\n    [:option {:value \"\"} \"-- Selecciona un campo --\"]\r\n    [:option {:value \"nombre\"} \"Nombre\"]\r\n    [:option {:value \"description\"} \"Descripci\u00f3n\"]\r\n    [:option {:value \"precio\"} \"Precio\"]\r\n    [:option {:value \"categoria_id\"} \"Categor\u00eda\"]\r\n    [:option {:value \"tipo_plato\"} \"Tipo de plato\"]\r\n    [:option {:value \"tipo_porcion\"} \"Tipo de porci\u00f3n\"]\r\n    [:option {:value \"es_vegetariano\"} \"Vegetariano\"]\r\n    [:option {:value \"es_vegano\"} \"Vegano\"]\r\n    [:option {:value \"es_sin_gluten\"} \"Sin gluten\"]\r\n    [:option {:value \"es_sin_lactosa\"} \"Sin lactosa\"]]\r\n\r\n   (when (not= @campo-seleccionado \"\")\r\n     [:div {:style {:margin-top \"15px\"}}\r\n      [:label (str \"Nuevo valor para el campo seleccionado: \")]\r\n      (cond\r\n        ;; Booleans\r\n        (#{\"es_vegetariano\" \"es_vegano\" \"es_sin_gluten\" \"es_sin_lactosa\"} @campo-seleccionado)\r\n        [:select {:value (or @nuevo-valor \"\")\r\n                  :on-change #(reset! nuevo-valor (-> % .-target .-value))}\r\n         [:option {:value \"\"} \"-- Selecciona una opci\u00f3n --\"]\r\n         [:option {:value \"true\"} \"S\u00ed\"]\r\n         [:option {:value \"false\"} \"No\"]]\r\n\r\n        ;; Tipo de plato con opciones espec\u00edficas\r\n        (= @campo-seleccionado \"tipo_porcion\")\r\n        [:select {:value (or @nuevo-valor \"\")\r\n                  :on-change #(reset! nuevo-valor (-> % .-target .-value))}\r\n         [:option {:value \"\"} \"-- Selecciona un tipo de porcion --\"]\r\n         [:option {:value \"Media raci\u00f3n\"} \"Media raci\u00f3n\"]\r\n         [:option {:value \"Raci\u00f3n completa\"} \"Raci\u00f3n completa\"]\r\n         [:option {:value \"Por unidad\"} \"Por unidad\"]]\r\n\r\n        (= @campo-seleccionado \"tipo_plato\")\r\n        [:select {:value (or @nuevo-valor \"\")\r\n                  :on-change #(reset! nuevo-valor (-> % .-target .-value))}\r\n         [:option {:value \"\"} \"-- Selecciona un tipo de plato --\"]\r\n         [:option {:value \"Tapa\"} \"Tapa\"]\r\n         [:option {:value \"Al centro\"} \"Al centro\"]\r\n         [:option {:value \"Principal\"} \"Principal\"]\r\n         [:option {:value \"Postres\"} \"Postres\"]]\r\n\r\n        ;; Categor\u00eda (muestra ID y nombre)\r\n        (= @campo-seleccionado \"categoria_id\")\r\n        [:select {:value (or @nuevo-valor \"\")\r\n                  :on-change #(reset! nuevo-valor (-> % .-target .-value))}\r\n         [:option {:value \"\"} \"-- Selecciona una categor\u00eda --\"]\r\n         (for [{:keys [id nombre]} @categorias]\r\n           ^{:key id} [:option {:value id} (str id \" - \" nombre)])]\r\n\r\n        (= @campo-seleccionado \"precio\")\r\n        [:input {:type \"number\"\r\n                 :step \"0.01\"\r\n                 :min \"0\"\r\n                 :value @nuevo-valor\r\n                 :placeholder (str (get @producto (keyword @campo-seleccionado)))\r\n                 :on-change #(reset! nuevo-valor (-> % .-target .-value))}]\r\n\r\n        ;; Resto de campos usan input libre\r\n        :else\r\n        [:input {:type \"text\"\r\n                 :value @nuevo-valor\r\n                 :placeholder (str (get @producto (keyword @campo-seleccionado)))\r\n                 :on-change #(reset! nuevo-valor (-> % .-target .-value))}])\r\n\r\n      [:br]\r\n      [:button\r\n       {:on-click #(cond\r\n                     (= @campo-seleccionado \"precio\")\r\n                     (let [valor-num (js/parseFloat @nuevo-valor)]\r\n                       (cond\r\n                         (or (js/isNaN valor-num) (< valor-num 0))\r\n                         (js/alert \"El precio debe ser un n\u00famero mayor o igual que 0\")\r\n                         (tiene-mas-de-dos-decimales? @nuevo-valor)\r\n                         (js/alert \"El precio solo puede tener hasta dos decimales\")\r\n                         :else\r\n                         (do\r\n                           (actualizar-producto producto @campo-seleccionado @nuevo-valor valor-num)\r\n                           (reset! nuevo-valor \"\")\r\n                           (js/alert \"Producto actualizado, dale al boton de 'Mostrar productos' para actualizar el listado.\"))))\r\n                     :else\r\n                     (do\r\n\r\n                       (actualizar-producto producto @campo-seleccionado @nuevo-valor nil)\r\n                       (reset! nuevo-valor \"\")\r\n                       (reset! app.state/acceso-editar? true)\r\n                       (js/alert \"Producto actualizado, dale al boton de 'Mostrar productos' para actualizar el listado.\")))}\r\n       \"Actualizar campo\"]])])\r\n\r\n\r\n(defn render-edicion-categoria [id categoria]\r\n  [:div\r\n   [:h3 \"Selecciona el campo que quieres modificar:\"]\r\n   [:select {:value (or @campo-seleccionado \"\")\r\n             :on-change #(reset! campo-seleccionado (-> % .-target .-value))}\r\n    [:option {:value \"\"} \"-- Selecciona un campo --\"]\r\n    [:option {:value \"nombre\"} \"Nombre\"]\r\n    [:option {:value \"descripcion\"} \"Descripci\u00f3n\"]]\r\n\r\n   (when (not= @campo-seleccionado \"\")\r\n     [:div {:style {:margin-top \"15px\"}}\r\n      [:label (str \"Nuevo valor para el campo seleccionado: \")]\r\n      [:input {:type \"text\"\r\n               :value @nuevo-valor\r\n               :placeholder (str (get @categoria (keyword @campo-seleccionado)))\r\n               :on-change #(reset! nuevo-valor (-> % .-target .-value))}]\r\n\r\n      [:br]\r\n      [:button {:on-click #(do\r\n                             (actualizar-categoria categoria @campo-seleccionado @nuevo-valor)\r\n                             (reset! nuevo-valor \"\")\r\n                             (reset! app.state/acceso-editar? true)\r\n                             (js/alert \"Categoria actualizado, dale al boton de 'Mostrar categorias' para actualizar el listado.\"))}\r\n       \"Actualizar campo\"]])])\r\n\r\n\r\n(defn page []\r\n  (if @state/acceso-editar?\r\n    (let [params (get-in @current-route [:parameters :path])\r\n          tipo (:tipo params)\r\n          id (js/parseInt (:id params))]\r\n      (r/with-let [_ (reset! producto (get-producto-por-id id))]\r\n        (r/with-let [_ (reset! categoria (get-categoria-por-id id))]\r\n          (case tipo\r\n            \"producto\"\r\n            (if @producto\r\n              [:div.row {:class \"divEditar\"}\r\n               [:div.col-12 {:class \"volverAtras\"}\r\n                [:button\r\n                 {:on-click #(set! (.-hash js/location) \"#/administracion\")}\r\n                 \"Volver al panel de Administraci\u00f3n\"]]\r\n               [:div.col-12.col-md-6 {:class \"divDatos\"}\r\n                [:h1 \"Datos del producto seleccionado:\"]\r\n                [:p [:strong \"ID: \"] (:id @producto)]\r\n                [:p [:strong \"Nombre: \"] (:nombre @producto)]\r\n                [:p [:strong \"Descripci\u00f3n: \"] (:description @producto)]\r\n                [:p [:strong \"Precio: \"] (str (:precio @producto) \" \u20ac\")]\r\n                [:p [:strong \"Categor\u00eda: \"] (:nombre_categoria @producto)]\r\n                [:p [:strong \"Tipo de plato: \"] (:tipo_plato @producto)]\r\n                [:p [:strong \"Tipo de porci\u00f3n: \"] (:tipo_porcion @producto)]\r\n                [:h3 [:strong \"Restricciones alimentarias: \"]]\r\n                [:p [:strong \"Vegetariano: \"]\r\n                 (if (:es_vegetariano @producto)\r\n                   [:span {:style {:color \"green\"}} \"\u2714\ufe0f\"]\r\n                   [:span {:style {:color \"red\"}} \"\u274c\"])]\r\n                [:p [:strong \"Vegano: \"]\r\n                 (if (:es_vegano @producto)\r\n                   [:span {:style {:color \"green\"}} \"\u2714\ufe0f\"]\r\n                   [:span {:style {:color \"red\"}} \"\u274c\"])]\r\n                [:p [:strong \"Gluten: \"]\r\n                 (if (:es_sin_gluten @producto)\r\n                   [:span {:style {:color \"green\"}} \"\u2714\ufe0f\"]\r\n                   [:span {:style {:color \"red\"}} \"\u274c\"])]\r\n                [:p [:strong \"Lactosa: \"]\r\n                 (if (:es_sin_lactosa @producto)\r\n                   [:span {:style {:color \"green\"}} \"\u2714\ufe0f\"]\r\n                   [:span {:style {:color \"red\"}} \"\u274c\"])]]\r\n               [:div.col-12.col-md-6 {:class \"divActualizar\"}\r\n                [render-edicion-producto producto]]]\r\n              [:div {:class \"divEditar\"} \"Producto no encontrado\"])\r\n\r\n            \"categoria\"\r\n            (if @categoria\r\n              [:div.row {:class \"divEditar\"}\r\n               [:div.col-12 {:class \"volverAtras\"}\r\n                [:button\r\n                 {:on-click #(set! (.-hash js/location) \"#/administracion\")}\r\n                 \"Volver al panel de Administraci\u00f3n\"]]\r\n               [:div.col-12.col-md-6 {:class \"divDatos\"}\r\n                [:h1 \"Editar categor\u00eda:\"]\r\n                [:p [:strong \"ID: \"] (:id @categoria)]\r\n                [:p [:strong \"Nombre: \"] (:nombre @categoria)]\r\n                [:p [:strong \"Descripci\u00f3n: \"] (:descripcion @categoria)]]\r\n               [:div.col-12.col-md-6 {:class \"divActualizar\"}\r\n                [render-edicion-categoria id categoria]]]\r\n              [:div {:class \"divEditar\"} \"Producto no encontrado\"])))))\r\n    [:div.alert.alert-danger\r\n     [:h4 \"\u26a0\ufe0f Acceso denegado\"]\r\n     [:p \"Para acceder a esta seccion, debes logearte y acceder desde su boton determinado.\"]]))\r\n\r\n\r\n\r\n"]}