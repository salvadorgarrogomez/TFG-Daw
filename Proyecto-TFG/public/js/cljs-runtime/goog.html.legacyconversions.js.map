{
"version":3,
"file":"goog.html.legacyconversions.js",
"lineCount":37,
"mappings":"AAyDAA,IAAKC,CAAAA,OAAL,CAAa,6BAAb,CAAA;AAEAD,IAAKE,CAAAA,OAAL,CAAa,oBAAb,CAAA;AACAF,IAAKE,CAAAA,OAAL,CAAa,sBAAb,CAAA;AACAF,IAAKE,CAAAA,OAAL,CAAa,qBAAb,CAAA;AACAF,IAAKE,CAAAA,OAAL,CAAa,0BAAb,CAAA;AACAF,IAAKE,CAAAA,OAAL,CAAa,mBAAb,CAAA;AACAF,IAAKE,CAAAA,OAAL,CAAa,8BAAb,CAAA;AAaAF,IAAKG,CAAAA,IAAKC,CAAAA,iBAAkBC,CAAAA,kBAA5B,GAAiDC,QAAQ,CAACH,IAAD,CAAO;AAE9DH,MAAKG,CAAAA,IAAKC,CAAAA,iBAAkBG,CAAAA,eAA5B,EAAA;AACA,SAAOP,IAAKG,CAAAA,IAAKK,CAAAA,QAASC,CAAAA,8CAAnB,CACHN,IADG,CAAP;AAH8D,CAAhE;AAkBAH,IAAKG,CAAAA,IAAKC,CAAAA,iBAAkBM,CAAAA,oBAA5B,GAAmDC,QAAQ,CAACC,MAAD,CAAS;AAElEZ,MAAKG,CAAAA,IAAKC,CAAAA,iBAAkBG,CAAAA,eAA5B,EAAA;AACA,SAAOP,IAAKG,CAAAA,IAAKU,CAAAA,UAAWC,CAAAA,gDAArB,CACHF,MADG,CAAP;AAHkE,CAApE;AAkBAZ,IAAKG,CAAAA,IAAKC,CAAAA,iBAAkBW,CAAAA,mBAA5B,GAAkDC,QAAQ,CAACC,KAAD,CAAQ;AAEhEjB,MAAKG,CAAAA,IAAKC,CAAAA,iBAAkBG,CAAAA,eAA5B,EAAA;AACA,SAAOP,IAAKG,CAAAA,IAAKe,CAAAA,SAAUC,CAAAA,+CAApB,CACHF,KADG,CAAP;AAHgE,CAAlE;AAkBAjB,IAAKG,CAAAA,IAAKC,CAAAA,iBAAkBgB,CAAAA,wBAA5B,GAAuDC,QAAQ,CAACC,UAAD,CAAa;AAE1EtB,MAAKG,CAAAA,IAAKC,CAAAA,iBAAkBG,CAAAA,eAA5B,EAAA;AACA,SAAOP,IAAKG,CAAAA,IAAKoB,CAAAA,cACZC,CAAAA,oDADE,CACmDF,UADnD,CAAP;AAH0E,CAA5E;AAkBAtB,IAAKG,CAAAA,IAAKC,CAAAA,iBAAkBqB,CAAAA,iBAA5B,GAAgDC,QAAQ,CAACC,GAAD,CAAM;AAE5D3B,MAAKG,CAAAA,IAAKC,CAAAA,iBAAkBG,CAAAA,eAA5B,EAAA;AACA,SAAOP,IAAKG,CAAAA,IAAKyB,CAAAA,OAAQC,CAAAA,6CAAlB,CAAgEF,GAAhE,CAAP;AAH4D,CAA9D;AAiBA3B,IAAKG,CAAAA,IAAKC,CAAAA,iBAAkB0B,CAAAA,4BAA5B,GAA2DC,QAAQ,CAACJ,GAAD,CAAM;AAEvE3B,MAAKG,CAAAA,IAAKC,CAAAA,iBAAkBG,CAAAA,eAA5B,EAAA;AACA,SAAOP,IAAKG,CAAAA,IAAK6B,CAAAA,kBACZC,CAAAA,wDADE,CACuDN,GADvD,CAAP;AAHuE,CAAzE;AAUA3B,IAAKG,CAAAA,IAAKC,CAAAA,iBAAkBG,CAAAA,eAA5B,GAA8C2B,QAAQ,EAAG;CAAzD;AAUAlC,IAAKG,CAAAA,IAAKC,CAAAA,iBAAkB+B,CAAAA,iBAA5B,GAAgDC,QAAQ,CAACC,QAAD,CAAW;AAEjErC,MAAKG,CAAAA,IAAKC,CAAAA,iBAAkBG,CAAAA,eAA5B,GAA8C8B,QAA9C;AAFiE,CAAnE;;",
"sources":["goog/html/legacyconversions.js"],
"sourcesContent":["/**\n * @license\n * Copyright The Closure Library Authors.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Transitional utilities to unsafely trust random strings as\n * goog.html types. Intended for temporary use when upgrading a library that\n * used to accept plain strings to use safe types, but where it's not\n * practical to transitively update callers.\n *\n * IMPORTANT: No new code should use the conversion functions in this file,\n * they are intended for refactoring old code to use goog.html types. New code\n * should construct goog.html types via their APIs, template systems or\n * sanitizers. If that\u2019s not possible it should use\n * goog.html.uncheckedconversions and undergo security review.\n *\n * The semantics of the conversions in goog.html.legacyconversions are very\n * different from the ones provided by goog.html.uncheckedconversions. The\n * latter are for use in code where it has been established through manual\n * security review that the value produced by a piece of code will always\n * satisfy the SafeHtml contract (e.g., the output of a secure HTML sanitizer).\n * In uses of goog.html.legacyconversions, this guarantee is not given -- the\n * value in question originates in unreviewed legacy code and there is no\n * guarantee that it satisfies the SafeHtml contract.\n *\n * There are only three valid uses of legacyconversions:\n *\n * 1. Introducing a goog.html version of a function which currently consumes\n * string and passes that string to a DOM API which can execute script - and\n * hence cause XSS - like innerHTML. For example, Dialog might expose a\n * setContent method which takes a string and sets the innerHTML property of\n * an element with it. In this case a setSafeHtmlContent function could be\n * added, consuming goog.html.SafeHtml instead of string, and using\n * goog.dom.safe.setInnerHtml instead of directly setting innerHTML.\n * setContent could then internally use legacyconversions to create a SafeHtml\n * from string and pass the SafeHtml to setSafeHtmlContent. In this scenario\n * remember to document the use of legacyconversions in the modified setContent\n * and consider deprecating it as well.\n *\n * 2. Automated refactoring of application code which handles HTML as string\n * but needs to call a function which only takes goog.html types. For example,\n * in the Dialog scenario from (1) an alternative option would be to refactor\n * setContent to accept goog.html.SafeHtml instead of string and then refactor\n * all current callers to use legacyconversions to pass SafeHtml. This is\n * generally preferable to (1) because it keeps the library clean of\n * legacyconversions, and makes code sites in application code that are\n * potentially vulnerable to XSS more apparent.\n *\n * 3. Old code which needs to call APIs which consume goog.html types and for\n * which it is prohibitively expensive to refactor to use goog.html types.\n * Generally, this is code where safety from XSS is either hopeless or\n * unimportant.\n */\n\n\ngoog.provide('goog.html.legacyconversions');\n\ngoog.require('goog.html.SafeHtml');\ngoog.require('goog.html.SafeScript');\ngoog.require('goog.html.SafeStyle');\ngoog.require('goog.html.SafeStyleSheet');\ngoog.require('goog.html.SafeUrl');\ngoog.require('goog.html.TrustedResourceUrl');\n\n\n/**\n * Performs an \"unchecked conversion\" from string to SafeHtml for legacy API\n * purposes.\n *\n * Please read fileoverview documentation before using.\n *\n * @param {string} html A string to be converted to SafeHtml.\n * @return {!goog.html.SafeHtml} The value of html, wrapped in a SafeHtml\n *     object.\n */\ngoog.html.legacyconversions.safeHtmlFromString = function(html) {\n  'use strict';\n  goog.html.legacyconversions.reportCallback_();\n  return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n      html);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" from string to SafeScript for legacy API\n * purposes.\n *\n * Please read fileoverview documentation before using.\n *\n * @param {string} script A string to be converted to SafeScript.\n * @return {!goog.html.SafeScript} The value of script, wrapped in a SafeScript\n *     object.\n */\ngoog.html.legacyconversions.safeScriptFromString = function(script) {\n  'use strict';\n  goog.html.legacyconversions.reportCallback_();\n  return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(\n      script);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" from string to SafeStyle for legacy API\n * purposes.\n *\n * Please read fileoverview documentation before using.\n *\n * @param {string} style A string to be converted to SafeStyle.\n * @return {!goog.html.SafeStyle} The value of style, wrapped in a SafeStyle\n *     object.\n */\ngoog.html.legacyconversions.safeStyleFromString = function(style) {\n  'use strict';\n  goog.html.legacyconversions.reportCallback_();\n  return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(\n      style);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" from string to SafeStyleSheet for legacy\n * API purposes.\n *\n * Please read fileoverview documentation before using.\n *\n * @param {string} styleSheet A string to be converted to SafeStyleSheet.\n * @return {!goog.html.SafeStyleSheet} The value of style sheet, wrapped in\n *     a SafeStyleSheet object.\n */\ngoog.html.legacyconversions.safeStyleSheetFromString = function(styleSheet) {\n  'use strict';\n  goog.html.legacyconversions.reportCallback_();\n  return goog.html.SafeStyleSheet\n      .createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(styleSheet);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" from string to SafeUrl for legacy API\n * purposes.\n *\n * Please read fileoverview documentation before using.\n *\n * @param {string} url A string to be converted to SafeUrl.\n * @return {!goog.html.SafeUrl} The value of url, wrapped in a SafeUrl\n *     object.\n */\ngoog.html.legacyconversions.safeUrlFromString = function(url) {\n  'use strict';\n  goog.html.legacyconversions.reportCallback_();\n  return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(url);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" from string to TrustedResourceUrl for\n * legacy API purposes.\n *\n * Please read fileoverview documentation before using.\n *\n * @param {string} url A string to be converted to TrustedResourceUrl.\n * @return {!goog.html.TrustedResourceUrl} The value of url, wrapped in a\n *     TrustedResourceUrl object.\n */\ngoog.html.legacyconversions.trustedResourceUrlFromString = function(url) {\n  'use strict';\n  goog.html.legacyconversions.reportCallback_();\n  return goog.html.TrustedResourceUrl\n      .createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(url);\n};\n\n/**\n * @private {function(): undefined}\n */\ngoog.html.legacyconversions.reportCallback_ = function() {};\n\n\n/**\n * Sets a function that will be called every time a legacy conversion is\n * performed. The function is called with no parameters but it can use\n * goog.debug.getStacktrace to get a stacktrace.\n *\n * @param {function(): undefined} callback Error callback as defined above.\n */\ngoog.html.legacyconversions.setReportCallback = function(callback) {\n  'use strict';\n  goog.html.legacyconversions.reportCallback_ = callback;\n};\n"],
"names":["goog","provide","require","html","legacyconversions","safeHtmlFromString","goog.html.legacyconversions.safeHtmlFromString","reportCallback_","SafeHtml","createSafeHtmlSecurityPrivateDoNotAccessOrElse","safeScriptFromString","goog.html.legacyconversions.safeScriptFromString","script","SafeScript","createSafeScriptSecurityPrivateDoNotAccessOrElse","safeStyleFromString","goog.html.legacyconversions.safeStyleFromString","style","SafeStyle","createSafeStyleSecurityPrivateDoNotAccessOrElse","safeStyleSheetFromString","goog.html.legacyconversions.safeStyleSheetFromString","styleSheet","SafeStyleSheet","createSafeStyleSheetSecurityPrivateDoNotAccessOrElse","safeUrlFromString","goog.html.legacyconversions.safeUrlFromString","url","SafeUrl","createSafeUrlSecurityPrivateDoNotAccessOrElse","trustedResourceUrlFromString","goog.html.legacyconversions.trustedResourceUrlFromString","TrustedResourceUrl","createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse","goog.html.legacyconversions.reportCallback_","setReportCallback","goog.html.legacyconversions.setReportCallback","callback"]
}
