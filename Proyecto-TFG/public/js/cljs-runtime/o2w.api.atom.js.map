{"version":3,"sources":["o2w/api/atom.cljs"],"mappings":";AAKA,AAAA;AAAA;;;wBAAA,xBAAae;;AAAb,IAAAf,8CAAA,WACWgB;AADX,AAAA,IAAAf,kBAAA,EAAA,UAAA,OAAA,hBACWe,qBAAAA;IADXd,kBAAA,CAAAC,yBAAA,AAAAC,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TACWc,oCAAAA;;AADX,IAAAX,kBAAA,CAAAF,yBAAA;AAAA,AAAA,GAAA,GAAA,CAAAE,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TACWW,oCAAAA;;AADX,MAAA,AAAAV,2BAAA,kBACWU;;;;AADX,AAAA,2BAAA,3BACGb,8DAAQa;AADX,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,mDAAA,7EACWA,0BAAAA;AADX,OACWA,gDAAAA;;AADX,OAAAhB,4CACWgB;;;;AADX,IAAAT,8CAAA,WAEWS;AAFX,AAAA,IAAAf,kBAAA,EAAA,UAAA,OAAA,hBAEWe,qBAAAA;IAFXd,kBAAA,CAAAM,yBAAA,AAAAJ,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAEWc,oCAAAA;;AAFX,IAAAX,kBAAA,CAAAG,yBAAA;AAAA,AAAA,GAAA,GAAA,CAAAH,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAEWW,oCAAAA;;AAFX,MAAA,AAAAV,2BAAA,kBAEWU;;;;AAFX,AAAA,2BAAA,3BAEGR,8DAAQQ;AAFX,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,mDAAA,7EAEWA,0BAAAA;AAFX,OAEWA,gDAAAA;;AAFX,OAAAT,4CAEWS;;;;AAFX,IAAAP,gDAAA,WAGaO;AAHb,AAAA,IAAAf,kBAAA,EAAA,UAAA,OAAA,hBAGae,qBAAAA;IAHbd,kBAAA,CAAAQ,2BAAA,AAAAN,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAGac,oCAAAA;;AAHb,IAAAX,kBAAA,CAAAK,2BAAA;AAAA,AAAA,GAAA,GAAA,CAAAL,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAGaW,oCAAAA;;AAHb,MAAA,AAAAV,2BAAA,oBAGaU;;;;AAHb,AAAA,6BAAA,7BAGGN,kEAAUM;AAHb,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,qDAAA,/EAGaA,0BAAAA;AAHb,OAGaA,kDAAAA;;AAHb,OAAAP,8CAGaO;;;;AAHb,IAAAL,+CAAA,WAIYK,MAAKC;AAJjB,AAAA,IAAAhB,kBAAA,EAAA,UAAA,OAAA,hBAIYe,qBAAAA;IAJZd,kBAAA,CAAAU,0BAAA,AAAAR,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,0DAAAA,ZAIYc,uCAAAA,jCAAKC,uCAAAA;;AAJjB,IAAAZ,kBAAA,CAAAO,0BAAA;AAAA,AAAA,GAAA,GAAA,CAAAP,mBAAA;AAAA,QAAAA,gDAAAA,0DAAAA,ZAIYW,uCAAAA,jCAAKC,uCAAAA;;AAJjB,MAAA,AAAAX,2BAAA,mBAIYU;;;;AAJZ,AAAA,4BAAA,5BAIGJ,gEAASI,MAAKC;AAJjB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,oDAAA,9EAIYD,0BAAAA;AAJZ,OAIYA,iDAAAA,MAAKC;;AAJjB,OAAAN,6CAIYK,MAAKC;;;;AAJjB,IAAAJ,iDAAA,WAKaG;AALb,AAAA,IAAAf,kBAAA,EAAA,UAAA,OAAA,hBAKae,qBAAAA;IALbd,kBAAA,CAAAY,4BAAA,AAAAV,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAKac,oCAAAA;;AALb,IAAAX,kBAAA,CAAAS,4BAAA;AAAA,AAAA,GAAA,GAAA,CAAAT,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAKaW,oCAAAA;;AALb,MAAA,AAAAV,2BAAA,oBAKaU;;;;AALb,AAAA,8BAAA,9BAKGF,oEAAUE;AALb,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,sDAAA,hFAKaA,0BAAAA;AALb,OAKaA,mDAAAA;;AALb,OAAAH,+CAKaG;;;;AALb,AAOA,0BAAA,kCAAAE,5DAAMI;AAAN,AAAA,IAAAH,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;eAAA,AAAAE,4CAAAF,eAAA,tEAA0BI;aAA1B,AAAAF,4CAAAF,eAAA,pEAAmCK;sBAAnC,AAAAH,4CAAAF,eAAA,7EAA0CM;+BAA1C,AAAAJ,4CAAAF,eAAA,tFAAoDO;+BAApD,AAAAL,4CAAAF,eAAA,tFAAuEQ;eAAvE,AAAAN,4CAAAF,eAAA,tEAA0FS;AAA1F,AACE,IAAMA,eAAS,4CAAA,AAAAC,1BAAIF,0CAAoBC,UAASA;AAAhD,AACE,IAAAE,WAAA,2CAAA,wDAAiB,mCAAA,AAAAD,jBAAIJ,iCAAWD,QAAOA;AAAvC,AAAA,oBACEI;AAAS,qDAAAE,SAAA,vDAACC,iHAAgBH;;AAD5BE;;;AAGJ,6BAAA,qCAAAE,lEAAME;AAAN,AAAA,IAAAD,aAAAD;IAAAC,iBAAA,AAAAb,4BAAAa;eAAA,AAAAZ,4CAAAY,eAAA,tEAA0BV;+BAA1B,AAAAF,4CAAAY,eAAA,tFAAmCP;AAAnC,AAAyD,oBAAIA;AAAJ,OAAAG,gBAAwBN;;AAASA;;;AAC1F,AAAA,AAAA,AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,sEAAA,WAAAY,mBAAAC,pGAAWoF;;AAAX,AAAA,IAAArF,yBAAA;AAAA,AAAA,OAAAA,+DAAAC,gBAAA;;;AAAA,CAAA,AAAA,sEAAA,WAAAC,mBAAAC,OAAAC,3GAAWiF;;AAAX,AAAA,IAAAnF,yBAAA;AAAA,AAAA,IAAAG,WAAAF;IAAAE,eAAA,EAAA,CAAAA,oBAAAC,oBAAA,AAAAD,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAAxB;;;;AAAA,OAAAK,4CAAAqB,gBAAAJ,OAAAC;;;;;AAAA,CAAA,AAAA,2EAAA,WAAAI,mBAAAC,gBAAAC,zHAAW2E;;AAAX,AAAA,IAAA7E,yBAAA;AAAA,AAAA,OAAAG,+CAAA,WAAAC,kBAAAC;AAAA,AAAA,IAAAC,aAAAD;IAAAE,kBAAA,AAAAC,4CAAAF,WAAA,IAAA;IAAAG,kBAAA,AAAAD,4CAAAF,WAAA,IAAA;AAAA,AAAA,QAAAL,gDAAAA,8CAAAG,kBAAAG,gBAAAE,mBAAAR,2BAAAG,kBAAAG,gBAAAE;GAAAP,mBAAAF;;;AAAA,CAAA,AAAA,iEAAAU,jEAAWmE;;AAAX,CAAA,AAAA,kFAAA,WAAAlE,mBAAAC,qBAAAC,rIAAWgE;;AAAX,AAAA,IAAAlE,yBAAA;AAAA,AAAA,IAAAG,wBAAA,WAAAC;AAAA,AAAA,OAAAC,+BAAAJ,qBAAA,oBAAA,GAAA,IAAA,GAAAC,mBAAAE;;AAAA,AAAA,OAAAC,+BAAAJ,qBAAAE,sBAAA,4BAAA,KAAA,IAAAD,mBAAA,AAAAI,+CAAA,mFAAA,KAAAC,2BAAA,KAAA,EAAA,IAAA,AAAAA,sCAAA,CAAA,qDAAA7C,cAAA,eAAA0B;;;AAAA,CAAA,AAAA,0EAAA,WAAAoB,rFAAW0D;;AAAX,AAAA,IAAA1D,eAAA;AAAA,AAAA,YAAAC,qBAAA,IAAAD,aAAA,EAAA,mFAAA,6DAAA,kBAAApB,iBAAA,AAAAsB,oBAAAtB,iBAAA,AAAAuB;;;AAAA,CAAA,AAAA,kEAAA,WAAAC,7EAAWsD;;AAAX,AAAA,IAAAtD,yBAAA;AAAA,AAAAC;;;AAAA,CAAA,AAAA,wEAAA,WAAAC,nFAAWoD;;AAAX,AAAA,IAAApD,yBAAA;AAAA,AAAA,oCAAApD,aAAAmD,cAAAzB,gBAAA2B,nEAAWmD;;;AAAX,CAAA,AAAA,sEAAA,WAAAlD,jFAAWkD;;AAAX,AAAA,IAAAlD,yBAAA;AAAA,AAAA,QAAA,IAAA,AAAAC,gBAAA7B;;;AAAA,CAAA,AAAA,0EAAA,WAAA8B,rFAAWgD,8FAyDiBsC;;AAzD5B,AAAA,IAAArF,aAAAD;IAAAC,iBAAA,AAAArD,4BAAAqD;YAAA,AAAApD,4CAAAoD,eAAA,nEAyDoB0D;AAzDpB,AAAA,IAAAzD,aAAA;IAAAA,iBAAA,AAAAtD,4BAAAsD;gBAAA,AAAArD,4CAAAqD,eAAA,vEAyDoByD;AAzDpB,AA0DI,OAACK,sBAAOL,UAAM2B;;;AA1DlB,CAAA,AAAA,kEAAA,WAAAnF,7EAAW6C;;AAAX,AAAA,IAAA7C,yBAAA;AAAA,AAAA,IAAAC,kBAAAP;AAAA,AAAA,GAAA,GAAA,CAAAO,mBAAA;AAAAA;;AAAA,IAAAA,sBAAA,AAAA,WAAAC;AAAA,AAAA,QAAA,aAAA,AAAAC,8BAAAD;GAAAF;AAAA,AAAA,CAAAN,gBAAAO;;AAAAA;;;;AAAA,CAAA,AAAA,oEAAA,WAAAG,UAAAC,zFAAWwC;;AAAX,AAAA,IAAAzC,gBAAA;AAAA,AAAA,SAAA,GAAA,CAAAC,cAAA,aAAA,EAAA,CAAA,AAAAD,8BAAA,AAAAC,6BAAA,EAAA,AAAAC,6CAAA,AAAAF,mBAAA,AAAAC,sBAAA,AAAAC,6CAAA,AAAAF,uBAAA,AAAAC;;;AAAA,CAAA,AAAA,wEAAA,xEAAWwC,mFAiDAxG,UAAKuI,EAAEC;;AAjDlB,AAAA,gBAAA,ZAiDWxI;AAjDX,AAkDI,OAASA,2DAAK,WAAKmH;AAAL,AAAY,OAACsB,mDAAMtB,MAAMoB,EAAEC;;;;AAlD7C,CAAA,AAAA,wEAAA,xEAAWhC,mFAmDAxG,UAAKuI,EAAEC,EAAEE;;AAnDpB,AAAA,gBAAA,ZAmDW1I;AAnDX,AAoDI,OAASA,2DAAK,WAAKmH;AAAL,AAAY,OAACsB,mDAAMtB,MAAMoB,EAAEC,EAAEE;;;;AApD/C,CAAA,AAAA,wEAAA,xEAAWlC,mFAqDAxG,UAAKuI,EAAEC,EAAEE,EAAEC;;AArDtB,AAAA,gBAAA,ZAqDW3I;AArDX,AAsDI,OAASA,2DAAK,WAAKmH;AAAL,AAAY,OAACyB,8CAAMC,qBAAM1B,MAAMoB,EAAE,6CAAA,7CAACpD,gIAAMqD,EAAEE,UAAGC;;;;AAtD/D,CAAA,AAAA,2DAAAtG,3DAAWmE;;AAAX,CAAA,AAAA,8EAAA,WAAAtC,zFAAWsC;;AAAX,AAAA,IAAArC,aAAAD;IAAAC,iBAAA,AAAA/D,4BAAA+D;gBAAAA,ZAK8BnE;YAL9B,AAAAK,4CAAA8D,eAAA,nEAKmBgD;AALnB,AAAA,IAAA/C,aAAA;IAAAA,iBAAA,AAAAhE,4BAAAgE;gBAAAA,ZAK8BpE;gBAL9B,AAAAK,4CAAA+D,eAAA,vEAKmB+C;AALnB,AAMI,IAAMC,eAAa,AAAC9G,wBAAWN;AAA/B,AACE,OAACqH,sDAAS,AAACnG,2BAAWlB,6DAAM,oHAAA,2CAAA,gDAAA,WAAAsH,1NAACC,uGAAMH;AAAP,AAA0B,uCAAAE,hCAACE,sBAAOL;;;;AAPpE,CAAA,AAAA,gFAAA,hFAAWX,2FASExG;;AATb,AAAA,gBAAA,ZASaA;AATb,AASmB,OAAQA;;;AAT3B,CAAA,AAAA,8EAAA,WAAAqE,zFAAWmC;;AAAX,AAAA,IAAAlC,aAAAD;IAAAC,iBAAA,AAAAlE,4BAAAkE;kBAAA,AAAAjE,4CAAAiE,eAAA,zEAUmBmD;YAVnB,AAAApH,4CAAAiE,eAAA,nEAUyB6C;AAVzB,AAAA,IAAA5C,aAAA;IAAAA,iBAAA,AAAAnE,4BAAAmE;sBAAA,AAAAlE,4CAAAkE,eAAA,7EAUmBkD;gBAVnB,AAAApH,4CAAAkE,eAAA,vEAUyB4C;AAVzB,AAWI,sCAAA,tCAACK,sBAAOC;;AACR,uCAAA,hCAACD,sBAAOL;;;AAZZ,CAAA,AAAA,+EAAA,WAAA3C,1FAAWgC,mGAckEvG;;AAd7E,AAAA,IAAAwE,aAAAD;IAAAC,iBAAA,AAAArE,4BAAAqE;WAAAA,PAcuEsD;YAdvE,AAAA1H,4CAAAoE,eAAA,nEAcoB0C;cAdpB,AAAA9G,4CAAAoE,eAAA,rEAc0BiD;cAd1B,AAAArH,4CAAAoE,eAAA,rEAckCkD;SAdlC,AAAAtH,4CAAAoE,eAAA,hEAc0CmD;YAd1C,AAAAvH,4CAAAoE,eAAA,nEAc6CoD;qBAd7C,AAAAxH,4CAAAoE,eAAA,5EAcmDqD;kBAdnD,AAAAzH,4CAAAoE,eAAA,zEAc4DgD;AAd5D,AAAA,IAAA/C,aAAA;IAAAA,iBAAA,AAAAtE,4BAAAsE;eAAAA,XAcuEqD;gBAdvE,AAAA1H,4CAAAqE,eAAA,vEAcoByC;kBAdpB,AAAA9G,4CAAAqE,eAAA,zEAc0BgD;kBAd1B,AAAArH,4CAAAqE,eAAA,zEAckCiD;aAdlC,AAAAtH,4CAAAqE,eAAA,pEAc0CkD;gBAd1C,AAAAvH,4CAAAqE,eAAA,vEAc6CmD;yBAd7C,AAAAxH,4CAAAqE,eAAA,hFAcmDoD;sBAdnD,AAAAzH,4CAAAqE,eAAA,7EAc4D+C;AAd5D,AAeI,oBAAA,AAAA5G,gBAAK4G;AACH,AACE,YAAA,ZAACO,sBAAyB/H;;AAC1B,oBAAMA;AAAN,AAAS,QAACA,mCAAAA,8CAAAA,bAAGkH,2BAAAA;;AAAb;;;AACF,oBAAA,AAAAtG,gBAAWiH;AAAX;;AAAA,AACE,IAAMV,eAAa,AAAC9G,wBAAWyH;IACzBE,oBAAa;AAAA,AAAO,oBAAMP;AAAN,AACE,oBAAA,AAAA7G,gBAAO8G;AAAP,AAAe,cAAA,AAAA9G,dAACqH,8BAAkBP;;AAAlC;;AACA,OAACH,sBAAOG,YAAQ,YAAA,ZAACQ;AAAD,AAAiB,OAACzI,2BAASqI;GAAM,CAAA,SAAQL;;AAF3D;;;AAD1B,AAIE,AAACO;;AACD,yCAAA,zCAACT,sBAAOM;;AACR,OAACT,sDAAS,AAACnG,2BAAW6G,4DACZ,6HAAA,2CAAA,gDAAA,WAAAK,nOAACb,uGAAMQ,SACAX;AADP,AAEgB,AACE,sCAAA,tCAACI,sBAAOC;;AACR,gCAAAW,hCAACZ,sBAAOL;;AACR,yCAAA,zCAACK,sBAAOM;;AACR,oBAAM7H;AAAN,AAAS,CAACA,mCAAAA,8CAAAA,bAAGkH,2BAAAA;;AAAb;;AACA,oBAAMS;AAAN,AAAS,oFAAAQ,gDAAAA,5HAACR,uCAAAA,mEAAAA,bAAKT,gDAAAA;;AAAf;;GAPlB,uDAAA,WAAAkB;AAAA,AAQgB,AACE,sCAAA,tCAACb,sBAAOC;;AACR,gCAAA,hCAACD,sBAAOL;;AACR,yCAAA,zCAACK,sBAAOM;;AACR,oBAAMD;AAAN,AAAY,0FAAAQ,mDAAAA,rIAACR,0CAAAA,sEAAAA,bAAQV,mDAAAA;;AAArB;;;;;;;AAvCtC,CAAA,AAAA,iFAAA,WAAAxC,5FAAW6B;;AAAX,AAAA,IAAA5B,aAAAD;IAAAC,iBAAA,AAAAxE,4BAAAwE;qBAAA,AAAAvE,4CAAAuE,eAAA,5EAwCqBkD;AAxCrB,AAAA,IAAAjD,aAAA;IAAAA,iBAAA,AAAAzE,4BAAAyE;yBAAA,AAAAxE,4CAAAwE,eAAA,hFAwCqBiD;AAxCrB,AAAA,OAAAjH,gBAyCKiH;;;AAzCL,CAAA,AAAA,mEAAA,WAAAhD,mBAAAC,jGAAWyB;;AAAX,AAAA,IAAA1B,yBAAA;AAAA,AAAA,GAAA,AAAAE,0BAAA,iFAAA,yEAAAD;AAAA,OAAAE,+CAAA,AAAAC,qBAAA,AAAAC,6CAAA,mCAAAL,wBAAA3B,eAAA4B;;AAAA,oCAAA/E,aAAAmD,cAAA,AAAAiC,oBAAA,AAAAH,+CAAAvD,gBAAAqD,kBAAA,xJAAWyB;;;;AAAX,CAAA,AAAA,wFAAA,WAAAnB,mBAAA/D,tHAAWkF;;AAAX,AAAA,IAAAnB,yBAAA;AAAA,AAAA,IAAAC,WAAAhE;IAAAgE,eAAA,EAAA,CAAAA,oBAAA7D,oBAAA,AAAA6D,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAA;;;;AAAA,OAAAN,0BAAAtD,gBAAAJ;;;;;AAAA,CAAA,AAAA,0EAAA,WAAAiE,mBAAAC,gBAAA1C,xHAAW0D;;AAAX,AAAA,IAAAjB,yBAAA;AAAA,AAAA,IAAAE,cAAAC;IAAAC,cAAAH;AAAA,AAAA,oBAAA,CAAAC,4CAAAA,0CAAA,qDAAAE,eAAAF,uBAAA,qDAAAE;AAAA,oCAAA7C,SAAAK,cAAAzB,gBAAA,/DAAW8E;;AAAX,oCAAAxG,aAAAmD,cAAA,AAAApC,8CAAAW,gBAAA8D,gBAAA1C,UAAA,3IAAW0D;;;;AAAX,CAAA,AAAA,oEAAA,WAAAZ,/EAAWY;;AAAX,AAAA,IAAAZ,yBAAA;AAAA,AAAA,OAAAC,cAAA,AAAAjD,+CAAA,mFAAA,KAAAkD,mBAAA,qDAAA9F,aAAA,eAAA0B;;;AAAA,CAAA,AAAA,oEAAA,WAAAqE,/EAAWS;;AAAX,AAAA,IAAAR,aAAAD;IAAAC,iBAAA,AAAA5F,4BAAA4F;gBAAAA,ZA4CoChG;YA5CpC,AAAAK,4CAAA2F,eAAA,nEA4CmBmB;kBA5CnB,AAAA9G,4CAAA2F,eAAA,zEA4CyByB;AA5CzB,AAAA,IAAAxB,aAAA;IAAAA,iBAAA,AAAA7F,4BAAA6F;gBAAAA,ZA4CoCjG;gBA5CpC,AAAAK,4CAAA4F,eAAA,vEA4CmBkB;sBA5CnB,AAAA9G,4CAAA4F,eAAA,7EA4CyBwB;AA5CzB,AAAA,AAAA5G,gBA6CK,AAAAyH,4BAAA;AAAA,AAAU,oBAAA,AAAAzH,gBAAW4G;AAAX;;AAAA,AAAiB,2CAAA,pCAAC7H,0BAAQI;;;;AA7CzC,OAAAa,gBA8CKsG;;;AA9CL,CAAA,AAAA,2EAAA,WAAAjB,mBAAApD,zGAAW0D;;AAAX,AAAA,IAAAN,yBAAA;AAAA,AAAA,oCAAAlG,aAAA8C,SAAApB,gBAAA2B,9DAAWmD;;;AAAX,CAAA,AAAA,wEAAA,WAAAL,mBAAAC,tGAAWI;;AAAX,AAAA,IAAAL,yBAAA;AAAA,AAAA,GAAA,AAAAE,wBAAAD;AAAA,OAAAD,mEAAA,AAAAG,eAAAF,oBAAA,KAAA,AAAAE,eAAAF,oBAAA;;AAAA,OAAAtE,+CAAAyE,gBAAAJ,uBAAAC;;;;AAAA,CAAA,AAAAI,mCAAA;AAAA,AAAA,AAAA;;;AAAA,CAAA,AAAAA,yCAAA;;AAAA,CAAA,AAAAA,8CAAA,WAAAC;AAAA,AAAA,YAAAC,eAAA,KAAA,0BAAA,KAAA,IAAA;;;AAAA,CAAA,AAAAF,iDAAA,WAAAC,mBAAAE;AAAA,AAAA,OAAAC,iBAAAD,qBAAA;;;AAAA;;;+BAAA,/BAAWM,sEAAYjH;AAAvB,AAAA,YAAAwG,8BAAA,KAAA,KAAA,hBAAuBxG;;;AAAvB;;;kCAAA,0CAAA6G,5EAAWK;AAAX,AAAA,IAAAJ,uBAAA,iBAAAC,WAAA,AAAA9B,+CAAA4B,SAAA;AAAA,AAAA,GAAA,AAAAG,wBAAAH;AAAA,OAAA1B,6CAAA,mCAAA4B;;AAAAA;;;AAAA,AAAA,YAAAP,wBAAA,AAAA,mFAAAK,UAAA,KAAA,AAAAzB,oBAAA0B,sBAAA;;;AAAAN,AA4DA,AAAA,2BAAA,mCAAAuC,9DAAMM;AAAN,AAAA,IAAAL,qBAAA;AAAA,AAAA,IAAAC,0BAAA,AAAA;AAAA,AAAA,IAAAC,wBAAA;;AAAA,AAAA,GAAA,CAAAA,wBAAAD;AAAA,AAAA,AAAAD,wBAAA,CAAA,UAAAE;;AAAA,eAAA,CAAAA,wBAAA;;;;AAAA;;;;AAAA,IAAAC,uBAAA,EAAA,CAAA,MAAA,AAAAH,4BAAA,AAAA,KAAAI,qBAAA,AAAAJ,yBAAA,KAAA,IAAA,OAAA;AAAA,AAAA,OAAAK,8DAAA,CAAA,UAAA,MAAAF;;;AAAA,AAAA,CAAA,gEAAA,oBAAAG,pFAAMD,2EAAa9I;AAAnB,AAAA,IAAAgJ,aAAAD;IAAAC,iBAAA,AAAAnJ,4BAAAmJ;WAAAA,PAAmExB;cAAnE,AAAA1H,4CAAAkJ,eAAA,rEAAsCM;aAAtC,AAAAxJ,4CAAAkJ,eAAA,pEAA8C/I;eAA9C,AAAAH,4CAAAkJ,eAAA,tEAAqD3I;AAArD,AACE,IAAMuG,QAAmB,AAAC2C,gDAAOD;IAC3BpC,cAAmB,gDAAA,hDAACqC;IACpBhC,iBAAmB,gDAAA,hDAACgC;IACpBnC,UAAmB,gDAAA,hDAACmC;IACpBrJ,kBAAmB,AAACwD,6CAAE,AAAC8F,eAAKvJ,QAAQwJ;IACpCtJ,2BAAmB,AAACuD,6CAAE,AAAC8F,eAAKxJ,UAAUyJ;IACtCrJ,2BAAmB,AAACsD,6CAAE,AAAC8F,eAAKnJ,UAAUoJ;IACtChK,QAAmB,AAACkH,gCAAgB,4GAAA,wCAAA,uDAAA,iFAAA,6DAAA,wDAAA,6DAAA,iFAAA,2DAAA,4DAAA,tpBAACK,uGAAMQ,mtBAA0BxH,hGACAG,+DACAC,yBACAgH,/DACAG,rCACAL,oDACAjH,OACAC,0DACA0G;AAf3E,AAiBE,GAAM1G;AAAN,AAAgB,AAACwJ,yBAAS;AAAA,AAAO,kCAAA,lCAACzC,sBAAOC;;AAAf,OAAA5G,gBAA6BL;;;AAAvD;;AACA,GAAME;AAAN,AAAyB,AAACuJ,yBAAS;AAAA,AAAO,kCAAA,lCAACzC,sBAAOC;;AAAf,OAAA5G,gBAA6BN;;;AAAhE;;AACA,GAAMI;AAAN,AAAyB,AAACsJ,yBAAS;AAAA,AAAO,kCAAA,lCAACzC,sBAAOC;;AAAf,OAAA5G,gBAA6BD;;;AAAhE;;AAEAZ;;;AAtBJ,CAAA,mDAAA,nDAAMqJ;;AAAN;AAAA,CAAA,6CAAA,WAAAG,xDAAMH;AAAN,AAAA,IAAAI,WAAA,AAAAC,gBAAAF;IAAAA,eAAA,AAAAG,eAAAH;AAAA,AAAA,IAAAI,qBAAA;AAAA,AAAA,OAAAA,wDAAAH,SAAAD;;;AAAA","names":["o2w$api$atom$IapiAtom$fetch_BANG_$dyn","x__5350__auto__","m__5351__auto__","o2w.api.atom/fetch!","goog/typeOf","m__5349__auto__","cljs.core/missing-protocol","o2w$api$atom$IapiAtom$clean_BANG_$dyn","o2w.api.atom/clean!","o2w$api$atom$IapiAtom$refresh_BANG_$dyn","o2w.api.atom/refresh!","o2w$api$atom$IapiAtom$ensure_BANG_$dyn","o2w.api.atom/ensure!","o2w$api$atom$IapiAtom$loading_QMARK_$dyn","o2w.api.atom/loading?","o2w.api.atom/IapiAtom","this","cb","p__12682","map__12683","cljs.core/--destructure-map","cljs.core.get","o2w.api.atom/get-params","endpoint","params","reaction?","endpoint-reaction?","base-url-reaction?","base-url","cljs.core/deref","G__12684","cljs.core.assoc","p__12685","map__12686","o2w.api.atom/->endpoint","this__5300__auto__","k__5301__auto__","this__5302__auto__","k12693","else__5303__auto__","G__12697","cljs.core/Keyword","__extmap","this__5320__auto__","f__5321__auto__","init__5322__auto__","cljs.core.reduce","ret__5323__auto__","p__12698","vec__12699","k__5324__auto__","cljs.core.nth","v__5325__auto__","cljs.core/PROTOCOL_SENTINEL","this__5315__auto__","writer__5316__auto__","opts__5317__auto__","pr-pair__5318__auto__","keyval__5319__auto__","cljs.core/pr-sequential-writer","cljs.core.concat","cljs.core/PersistentVector","G__12692","cljs.core/RecordIter","cljs.core/-iterator","cljs.core/nil-iter","this__5298__auto__","__meta","this__5295__auto__","__hash","this__5304__auto__","cljs.core/count","p__12702","map__12703","map__12704","this__5296__auto__","h__5111__auto__","coll__5297__auto__","cljs.core/hash-unordered-coll","this12694","other12695","cljs.core._EQ_","p__12705","map__12706","map__12707","p__12708","map__12709","map__12710","p__12711","map__12712","map__12713","p__12714","map__12715","map__12716","this__5310__auto__","k__5311__auto__","cljs.core/contains?","cljs.core.dissoc","cljs.core/-with-meta","cljs.core.into","cljs.core/not-empty","this__5307__auto__","G__12717","this__5308__auto__","k__5309__auto__","pred__12718","cljs.core/keyword-identical?","expr__12719","this__5313__auto__","cljs.core/seq","cljs.core/MapEntry","p__12721","map__12722","map__12723","this__5299__auto__","this__5305__auto__","entry__5306__auto__","cljs.core/vector?","cljs.core/-nth","cljs.core/-conj","o2w.api.atom/RemoteAtom","this__5346__auto__","cljs.core/List","writer__5347__auto__","cljs.core/-write","G__12696","extmap__5342__auto__","G__12724","cljs.core/record?","o2w.api.atom/->RemoteAtom","o2w.api.atom/map->RemoteAtom","model","extra-params","o2w.api.impl.req","p1__12689#","cljs.core.merge","cljs.core/reset!","data?","refresh","timeout","ok","error","loading?","args","js/console.log","set-timeout!","js/clearInterval","js/setInterval","p1__12690#","p1__12691#","reagent.ratom/make-reaction","f","x","cljs.core.swap_BANG_","y","more","cljs.core.apply","cljs.core/swap!","data","var_args","args__5732__auto__","len__5726__auto__","i__5727__auto__","argseq__5733__auto__","cljs.core/IndexedSeq","o2w.api.atom/remote-atom","p__12727","map__12728","seq12725","G__12726","cljs.core/first","cljs.core/next","self__5711__auto__","initial","reagent.core.atom","cljs.core/type","reagent.ratom/Reaction","reagent.core/track!"],"sourcesContent":["(ns o2w.api.atom\n  (:require [o2w.api.impl :as impl]\n            [reagent.core :as r]\n            [reagent.ratom :refer [IReactiveAtom reaction Reaction]]))\n\n(defprotocol IapiAtom\n  (fetch! [this])\n  (clean! [this])\n  (refresh! [this])\n  (ensure! [this cb])\n  (loading? [this]))\n\n(defn get-params [{:keys [endpoint params reaction? endpoint-reaction? base-url-reaction? base-url]}]\n  (let [base-url (if base-url-reaction? @base-url base-url)]\n    (cond-> {:params (if reaction? @params params)}\n      base-url (assoc :base-url base-url))))\n\n(defn ->endpoint [{:keys [endpoint endpoint-reaction?]}] (if endpoint-reaction? @endpoint endpoint))\n(defrecord RemoteAtom [this]\n  IAtom\n  IReactiveAtom\n\n  IapiAtom\n  (fetch! [{:keys [model] :as this}]\n    (let [extra-params (get-params this)]\n      (impl/req (->endpoint this) (merge extra-params {:ok #(reset! model %)}))))\n\n  (refresh! [this] (fetch! this))\n  (clean! [{:keys [data? model]}]\n    (reset! data? nil)\n    (reset! model nil))\n\n  (ensure! [{:keys [model refresh timeout ok error loading? data?] :as args} cb]\n    (if @data?\n      (do\n        (js/console.log \"ENSURE \" cb)\n        (when cb (cb model)))\n      (when-not @loading?\n        (let [extra-params (get-params args)\n              set-timeout! (fn [] (when refresh\n                                    (when @timeout (js/clearInterval @timeout))\n                                    (reset! timeout (js/setInterval #(refresh! args) (* 1000 refresh)))))]\n          (set-timeout!)\n          (reset! loading? true)\n          (impl/req (->endpoint args)\n                    (merge args\n                           extra-params\n                           {:ok    #(do\n                                      (reset! data? true)\n                                      (reset! model %)\n                                      (reset! loading? false)\n                                      (when cb (cb model))\n                                      (when ok (ok % model)))\n                            :error #(do\n                                      (reset! data? true)\n                                      (reset! model nil)\n                                      (reset! loading? false)\n                                      (when error (error % model)))}))))))\n  (loading? [{:keys [loading?]}]\n    @loading?)\n\n  cljs.core/IDeref\n  (-deref [{:keys [model data?] :as this}]\n    @(reaction (when-not @data? (ensure! this nil)))\n    @model)\n\n  cljs.core/ISwap\n  (-swap! [this f x]\n    (ensure! this (fn [model] (swap! model f x))))\n  (-swap! [this f x y]\n    (ensure! this (fn [model] (swap! model f x y))))\n  (-swap! [this f x y more]\n    (ensure! this (fn [model] (apply swap! model f (into [x y] more)))))\n\n  cljs.core/IReset\n  (-reset! [{:keys [model]} data]\n    (reset! model data)))\n\n(defn remote-atom [endpoint & {:keys [initial params base-url] :as args}]\n  (let [model              (r/atom initial)\n        data?              (r/atom false)\n        loading?           (r/atom false)\n        timeout            (r/atom nil)\n        reaction?          (= (type params) Reaction)\n        endpoint-reaction? (= (type endpoint) Reaction)\n        base-url-reaction? (= (type base-url) Reaction)\n        this               (map->RemoteAtom (merge args {:endpoint           endpoint\n                                                         :endpoint-reaction? endpoint-reaction?\n                                                         :base-url-reaction? base-url-reaction?\n                                                         :timeout            timeout\n                                                         :loading?           loading?\n                                                         :data?              data?\n                                                         :params             params\n                                                         :reaction?          reaction?\n                                                         :model              model}))]\n\n    (when reaction? (r/track! (fn [] (reset! data? false) @params)))\n    (when endpoint-reaction? (r/track! (fn [] (reset! data? false) @endpoint)))\n    (when base-url-reaction? (r/track! (fn [] (reset! data? false) @base-url)))\n\n    this))\n"],"x_google_ignoreList":[0]}